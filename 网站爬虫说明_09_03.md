#### 网站爬虫说明

1. 爬虫需要爬取指定网站的指定栏目的所有内容，例如对于虎嗅网，**咨询**栏目为一级目录，一级目录下有**雪花一代**这个二级目录，爬取二级目录下的**所有文章**即可。

2. 爬虫要求：对于每篇文章，爬取以下内容：

   - link （文章对应的网页链接）    varchar(500)
   - item_path （文章所在的栏目） varchar(100)
   - title （文章中的标题）                varchar(100)
   - content_path（正本保存地址） varchar(200) （**冗余项，不需要保存**）
   - html_path（HTML文件保存地址）varchar(200)
   - page_view (页面浏览量)       int
   - publish_time （发布时间）Date

   要求：将链接，目录，标题，正文文件路径，HTML文件路径，页面浏览量，发布时间保存在数据库中，正文文件保存在文件系统中，HTML文件也保存在文件系统中。另外，保存文件的路径需要以文件所在栏目保存，目录名称以栏目拼音命名，首字母大写，具体如下示例。

   数据库字段规定为：

   link, item_path, title, content_path, page_view, publish_time

   数据库使用MySQL，表名为article_link,使用自增ID，数据库编码采用UTF-8。

   例如：对于"**虎嗅网->咨询->雪花一代**"下的一篇文章，保存形式为：

   | link                                     | item_path     | title                    | content_path                            | html_path                                | page_view |    publish_time     |
   | ---------------------------------------- | ------------- | ------------------------ | --------------------------------------- | ---------------------------------------- | :-------: | :-----------------: |
   | https://www.huxiu.com/article/212584.html | 虎嗅网->咨询->雪花一代 | 《奇葩说》还在火，曾为其冠名的“有范”却要关门了 | /HuXiuWang/ZiXun/XueHuaYiDai/212584.txt | /HuXiuWang/ZiXun/XueHuaYiDai/212584.html |     0     | 2017-08-30 21:08:00 |

   link: 给出完整链接，不能使相对地址，去掉路径中的参数

   item_path: 以指定的栏目为准，使用中文字符描述每个栏目，从顶级下降到子栏目，使用 **->** (英文输入法下打出)作为分隔符，

   title: 给出文章的标题，一般在HTML文件中的title部分，但是需要仔细检查。

   content_path: 每篇文章的正文文字部分，没有代码以及不相关内容，就是在网页上看到的那篇文章的正文。这个文件是纯文本形式，只包含所在网页的文章部分。另外，纯文本请注意对换行字符的控制，统一采用 "**\n**" 字符。文本采用UTF-8编码。(**此项与html路径有冗余，只需要保留HTML文件路径即可，但是请注意此项文件命名必须与HTML文件相同，只有文件类型不同**)

   html_path: 每篇文章的保存源代码的路径。采用UTF-8编码。

   ​	**Note**：content_path以及html_path保存文件路径均已上面的例子为模板 

   ​	/WebsiteName/Item/Subitem/xxx.txt

   ​	/WebsiteName/Item/Subitem/xxx.html

   ​	对于每篇文章，以上内容都必须准确，另外，爬取的内容符合要求，不爬取无关内容。

   page_view:每篇文章的浏览量，对于没有的网站，填充0,

   publish_time: 每篇文章的发布时间，基本上都有，没有的网站填充2000-01-01 00:00:00，日期格式为 

   ​        **year-month-day hour:minute:second**, 年份使用四位。

3. 代码规范：

   - 统一使用python3, 对于自己使用的模块或其他安装的软件，写文档说明名称，版本等信息。

   - 数据库配置写在单独的文件中

   - 使用logging模块记录日志，日志以time_log.log命令，存放在单独/log/文件夹下，记录格式为

     ```python
     import datatime
     log_format = "%(asctime)s %(filename)s[line: %(lineno)d] %(levelname)s %(message)s"
     date_format = "%Y-%m-%d %H:%M:%S"
     log_file_name_format = date.strftime("%Y-%m-%d") + "_log.log"
     ```

     记录内容：各类异常，请求超时，对整个爬取过程适当记录。




注意：对于每个爬取的网站，进入相关栏目后开始爬取。